<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Dovetail smart contracts modelling</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="ch00-00-introduction.html">Introduction</a></li><li><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li><a href="ch01-02-dovetail-cli.html"><strong aria-hidden="true">1.2.</strong> Dovetail CLI</a></li><li><a href="ch01-03-environment.html"><strong aria-hidden="true">1.3.</strong> Environment Prerequisites</a></li></ol></li><li><a href="ch02-00-labs.html"><strong aria-hidden="true">2.</strong> Labs</a></li><li><ol class="section"><li><a href="ch02-01-iou-tutorial.html"><strong aria-hidden="true">2.1.</strong> IoU Tutorial</a></li><li><ol class="section"><li><a href="ch02-02-model.html"><strong aria-hidden="true">2.1.1.</strong> Model Smart Contract</a></li><li><a href="ch02-03-import.html"><strong aria-hidden="true">2.1.2.</strong> Import Model</a></li><li><a href="ch02-04-implement.html"><strong aria-hidden="true">2.1.3.</strong> Implement Smart Contract</a></li><li><a href="ch02-05-export.html"><strong aria-hidden="true">2.1.4.</strong> Export Smart Contract</a></li><li><a href="ch02-06-generate-hf.html"><strong aria-hidden="true">2.1.5.</strong> Generate Fabric Artifacts</a></li><li><a href="ch02-07-test-hf.html"><strong aria-hidden="true">2.1.6.</strong> Test on Fabric</a></li><li><a href="ch02-08-generate-corda.html"><strong aria-hidden="true">2.1.7.</strong> Generate Corda Artifacts</a></li><li><a href="ch02-09-test-corda.html"><strong aria-hidden="true">2.1.8.</strong> Test on Corda</a></li></ol></li></ol></li><li><a href="ch03-00-contribute.html">Contribute</a></li><li class="affix"><a href="ch04-00-source.html">Source Code</a></li><li class="affix"><a href="ch05-00-community.html">Community</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Dovetail smart contracts modelling</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p align="center">
  <img src ="images/TIBCO Labs final with TM2-08_email.png" />
</p>
<p align="center" >
  <b>Project Dovetail™ is an Open Source tool for modelling blockchain smart contracts</b>
</p>
<p><a href="https://travis-ci.org/TIBCOSoftware/dovetail"><img src="https://travis-ci.org/TIBCOSoftware/dovetail.svg?branch=master" alt="Documentation Status" /></a><img src="https://img.shields.io/badge/license-BSD%20style-blue.svg"/></p>
<p align="center">
  <a href="#project-dovetail">Dovetail™</a> | <a href="#dovetail-core">Architecture</a> | <a href="#what-are-smart-contracts">Blockchains smart contracts</a> | <a href="#contributing">Contributing</a> | <a href="#license">License</a>
</p>
<p><br/></p>
<p>Developing blockchain solutions with today’s technology is challenging given the lack of tooling and standardization. Project Dovetail™ by TIBCO LABS™ addresses these issues by providing a graphical interface for modeling smart contracts, making them easier to write, visualize, test, and audit, all without deep programming experience.</p>
<p>Logic is abstracted from low-level code, and contracts can be deployed into different blockchain stacks with little or no change.
On-chain and off-chain computation can become more seamless, time to market is improved, and the risk of technology lock-in is reduced. Project Dovetail makes your smart contracts smarter.
<br/></p>
<p align="center">
  <img src ="images/eventhandlers.png" />
</p>
<a class="header" href="#what-are-smart-contracts" id="what-are-smart-contracts"><h1>What are Smart Contracts</h1></a>
<p>There are many definitions and descriptions of smart contracts, as each blockchain framework tends to implement this capability in its own way (if it does implement this feature at all). However, generally speaking, smart contracts (at least from an enterprise / permissioned perspective) may be thought of as application or business logic (defined in code) that runs within the context of a blockchain network itself.</p>
<p>The idea is to automate the processing of blockchain transactions across the network, use the logic to determine if a transaction will get written to the ledger, and to maintain accuracy, compliance, and trust.  In essence, smart contracts represent a method for controlling how changes are made to the underlying blockchain, in a non-centralized and (potentially) untrustworthy environment.  Supply chain transaction tracking, healthcare revenue cycle management, consumer contract execution, and government interactions are all areas in which smart contracts (business logic) may be applied.
Remember, however, that &quot;smart contracts&quot; are not necessarily &quot;smart&quot; (depends on the code) nor &quot;contracts&quot; (as they may not be viewed as legal contracts).  Thus, the term can be a bit misleading :)</p>
<a class="header" href="#project-dovetail" id="project-dovetail"><h1>Project Dovetail</h1></a>
<p>Project Dovetail™ is a framework that allows for the end to end design, development, testing, and deployment of blockchain smart contracts.  Project Dovetail™ allows you to develop smart contracts based on a series of models, helping to:</p>
<ul>
<li><strong>Increase security</strong> since the modeling abstraction layer will allow for reusable and tested code derived from the model.</li>
<li><strong>Simplify</strong> development via an extendable abstraction layer (flow model)</li>
<li><strong>Decouple</strong> your code from the underlying blockchain technology</li>
<li><strong>Reduce</strong> the amount of code needed</li>
<li><strong>Increase visibility</strong> and audit-ability</li>
<li><strong>Allow customizable modeling</strong> for your industry</li>
<li><strong>Expose</strong> a better UI for the design of smart contracts</li>
</ul>
<a class="header" href="#dovetail-core" id="dovetail-core"><h1>Dovetail Core</h1></a>
<p>Dovetail is based on TIBCO FLOGO™, an event-driven app framework used to develop apps for the cloud &amp; IoT edge. It can also be thought of as a lightweight <em>app kernel</em> used by open source &amp; commercial solutions like Dovetail here. The trigger used is based on the cli to generate or transpile your smart contract logic into blockchain technologies languages : R3 Corda, HyperLedger Fabric...</p>
<p>Dovetail Core provides the following key benefits:</p>
<p>⛓ <strong>Action chaining</strong> enables communication between one or more capabilities in a single, sub 10MB binary!<br/>
🏗 <strong>Common contribution model</strong> build activities and triggers that can be leveraged by all capabilities<br/>
🔨 <strong>Extensible</strong> easily extend the capabilities available by building your own action using the common interfaces<br/></p>
<a class="header" href="#dovetail-core-contribution-model" id="dovetail-core-contribution-model"><h2>Dovetail Core Contribution Model</h2></a>
<p>Dovetail™ Core exposes three principal contribution interfaces that enable developers to build common capabilities and functionality. These contribution interfaces include:</p>
<ul>
<li><strong>Connector Interface</strong> a common interface for importing predefined schemas into Dovetail, Hyperledger Composer Connector is an example.</li>
<li><strong>Trigger Interface</strong> a common interface for building event-consumers that dispatch events to one or more actions. The Smart Contract TXN Trigger is an example of a trigger.</li>
<li><strong>Activity Interface</strong> a common interface for exposing common application logic in a reusable manner. Think of this as a function, such as write to ledger, publish events, etc that can be used by all Dovetail apps.</li>
</ul>
<a class="header" href="#dovetail-flows" id="dovetail-flows"><h1>Dovetail Flows</h1></a>
<p>Dovetail Flows provides smart contract logic design capabilities and includes the following key highlights.</p>
<p>🌈 <strong>Painless development</strong> Visual modeler with step-back debugging capabilities &amp; elegant DSL<br/>
⚙️ <strong>Ultra-light process engine</strong> for conditional flow control</p>
<a class="header" href="#zero-code-developers" id="zero-code-developers"><h3>Zero-code Developers</h3></a>
<p>If your background is in or you prefer to develop your smart contracts using zero-coding environments, then read on, because we’ve got something special for you.</p>
<p>Flows Web UI is available via <a href="https://github.com/TIBCOSoftware/dovetail/releases">Dovetail releases page</a>.</p>
<p>To report any issues with the Issue tracker on this project.</p>
<a class="header" href="#dovetail-documentation" id="dovetail-documentation"><h1>Dovetail Documentation</h1></a>
<p>Dovetail documentation can be found on the <a href="https://tibcosoftware.github.io/dovetail/">documentation page</a> and the source code in the <a href="https://github.com/TIBCOSoftware/dovetail">github page</a>.</p>
<a class="header" href="#contributing" id="contributing"><h1>Contributing</h1></a>
<p>Want to contribute to Project Dovetail? We've made it easy, all you need to do is fork the repository you intend to contribute to, make your changes and create a Pull Request! Once the pull request has been created, you'll be prompted to sign the CLA (Contributor License Agreement) online.</p>
<p>Not sure where to start? No problem, here are a few suggestions:</p>
<ul>
<li><a href="https://github.com/TIBCOSoftware/dovetail-contrib">dovetail-contrib</a>: This repository contains all of the contributions, such as activities, triggers, etc. Perhaps there is something missing? Create a new activity or trigger or fix a bug in an existing activity or trigger.</li>
<li>Browse all of the Project Dovetail repositories and look for issues tagged <code>kind/help-wanted</code> or <code>good first issue</code></li>
</ul>
<p>If you have any questions, feel free to post an issue and tag it as a question or email <a href="mailto:tibcolabs@tibco.com">tibcolabs@tibco.com</a>.</p>
<p>For additional details, refer to the <a href="https://github.com/TIBCOSoftware/dovetail/blob/master/CONTRIBUTING.md">“Contribution Guidelines”</a>.</p>
<a class="header" href="#license" id="license"><h1>License</h1></a>
<p>The top level flogo repo, consisting of flow samples &amp; documentation, is licensed licensed under a BSD-style license. Refer to <a href="https://github.com/TIBCOSoftware/dovetail/blob/master/LICENSE">LICENSE</a> for license text.</p>
<p>Dovetail source code in <a href="https://github.com/TIBCOSoftware/dovetail-cli">dovetail-cli</a>, <a href="https://github.com/TIBCOSoftware/dovetail-contrib">dovetail-contrib</a>, <a href="https://github.com/TIBCOSoftware/dovetail-java-lib">dovetail-java-lib</a> are all licensed under a BSD-style license, refer to <a href="https://github.com/TIBCOSoftware/dovetail/blob/master/LICENSE">LICENSE</a></p>
<a class="header" href="#getting-started" id="getting-started"><h1>Getting Started</h1></a>
<p>Let’s start your Dovetail journey! There’s a lot to learn, but every journey starts
somewhere. In this chapter, we’ll discuss:</p>
<ul>
<li>Installing Dovetail Studio on Linux, macOS, and Windows</li>
<li>Installing Dovetail CLI</li>
<li>Development environment dependencies</li>
</ul>
<a class="header" href="#installing-the-project-dovetail-studio" id="installing-the-project-dovetail-studio"><h2>Installing the Project Dovetail Studio</h2></a>
<p>Installing the Project Dovetail Studio is quite simple just follow these steps:</p>
<p>1.- Download the latest version for your os architecture.</p>
<blockquote>
<p>You can find the latest release <a href="https://github.com/TIBCOSoftware/dovetail/releases/tag/v0.1.3">here</a></p>
</blockquote>
<p>Or you can just execute this commands</p>
<pre><code>mkdir dovetail_installation
cd dovetail_installation
curl -OL https://github.com/TIBCOSoftware/dovetail/releases/download/v0.1.3/TIB_dovetail_0.1.3_macosx_x86_64.zip
</code></pre>
<blockquote>
<p>Change the version or architecture of the url according to your environment.</p>
</blockquote>
<p>2.- Unzip the downloaded release (for example on mac) (from dovetail_installation folder).</p>
<pre><code>unzip TIB_dovetail_0.1.3_macosx_x86_64.zip
</code></pre>
<a class="header" href="#starting-dovetail-studio" id="starting-dovetail-studio"><h2>Starting Dovetail Studio</h2></a>
<p>To get started with your downloaded version of the Dovetail Studio in the previous step just do the following:</p>
<p>1.- Run studio</p>
<pre><code>dovetail/0.1/bin/run-studio.sh eula-accept
</code></pre>
<a class="header" href="#launching-dovetail-studio" id="launching-dovetail-studio"><h2>Launching Dovetail Studio</h2></a>
<p>To launch Dovetail Studio simply open your favorite web browser, and navigate to http://localhost:8090. You'll see the initial page to create your first smart contract!</p>
<a class="header" href="#installation-tutorial-video" id="installation-tutorial-video"><h2>Installation Tutorial Video</h2></a>
<video width="480" height="320" controls="controls">
    <source src="videos/dovetail_studio_install.mp4" type="video/mp4">
</video><a class="header" href="#introduction" id="introduction"><h2>Introduction</h2></a>
<p>The dovetail cli is a tool to mainly generate smart contracts for a given model built using ui tool <a href="ch01-01-installation.html">Dovetail Studio</a>, so we recommend you to learn how to do that first.</p>
<a class="header" href="#before-you-get-started" id="before-you-get-started"><h2>Before you get started</h2></a>
<p>Before you can get started with the cli tools you need to make sure you have the <a href="https://golang.org/doc/install">Go programming language</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. Go v1.11.x is required.</p>
<blockquote>
<p>Don't forget to set your <code>GOPATH</code> variable and make sure that <code>$GOPATH/bin</code> is part of your <code>PATH</code>
(see <a href="https://golang.org/doc/code.html#GOPATH">here</a> or <a href="https://github.com/golang/go/wiki/SettingGOPATH">here</a> for more details)</p>
</blockquote>
<a class="header" href="#installing-the-cli-tools" id="installing-the-cli-tools"><h2>Installing the cli tools</h2></a>
<p>Copy and paste the following commands to install Project Dovetail™ commandline tool.</p>
<pre><code>cd $GOPATH
curl https://github.com/TIBCOSoftware/dovetail-cli/releases/download/v0.1.3/dovetail-cli-install.sh -sSfL | sh
</code></pre>
<blockquote>
<p>The binary dovetail will be in the $GOPATH/bin directory.</p>
</blockquote>
<a class="header" href="#installation-tutorial-video-1" id="installation-tutorial-video-1"><h2>Installation Tutorial Video</h2></a>
<video width="480" height="320" controls="controls">
    <source src="videos/dovetail_cli_install.mp4" type="video/mp4">
</video>
<a class="header" href="#dovetail-studio-requirements" id="dovetail-studio-requirements"><h2>Dovetail Studio Requirements</h2></a>
<a class="header" href="#docker" id="docker"><h3>Docker</h3></a>
<p>Docker is needed to run Dovetail Studio, you can find the installation details here:</p>
<ul>
<li><a href="https://docs.docker.com/">Docker</a></li>
<li><a href="https://docs.docker.com/compose/install/">Docker Compose</a></li>
</ul>
<a class="header" href="#hyperledger-fabric-requirements" id="hyperledger-fabric-requirements"><h2>Hyperledger Fabric Requirements</h2></a>
<a class="header" href="#hyperledger-fabric-sdk" id="hyperledger-fabric-sdk"><h3>Hyperledger Fabric SDK</h3></a>
<p>If you are developing for Hyperledger Fabric, below is a link to its installation instructions.</p>
<ul>
<li><a href="https://hyperledger-fabric.readthedocs.io/en/release-1.3/install.html">Hyperledger Fabric</a></li>
</ul>
<a class="header" href="#r3-corda-requirements" id="r3-corda-requirements"><h2>R3 Corda Requirements</h2></a>
<a class="header" href="#java-programming-language-and-tools" id="java-programming-language-and-tools"><h3>Java Programming Language and Tools</h3></a>
<p>If you are developing for R3 Corda you will need Java runtime.</p>
<ul>
<li>IMPORTANT: <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SE Development Kit 8</a> is required</li>
<li><a href="https://maven.apache.org/install.html">Maven</a></li>
</ul>
<p>If you are developing for R3 Corda, following jars must be available in your local or public Maven Repository.</p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;
        &lt;artifactId&gt;kotlin-stdlib-jre8&lt;/artifactId&gt;
        &lt;version&gt;1.1.60&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;net.corda&lt;/groupId&gt;
        &lt;artifactId&gt;corda-core&lt;/artifactId&gt;
        &lt;version&gt;[2.0.0,)&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;net.corda&lt;/groupId&gt;
        &lt;artifactId&gt;corda-finance&lt;/artifactId&gt;
        &lt;version&gt;[2.0.0,)&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.tibco.dovetail&lt;/groupId&gt;
        &lt;artifactId&gt;dovetail-corda&lt;/artifactId&gt;
        &lt;version&gt;[0.1.3, )&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<blockquote>
<p>Project Dovetail™ library for R3 Corda is available <a href="https://github.com/TIBCOSoftware/dovetail-contrib/releases/download/v0.1.3/dovetail_corda_v0.1.3.jar">here</a>, run following command to install it to your local Maven repository</p>
</blockquote>
<pre><code>mkdir dovetail_corda
cd dovetail_corda
curl -OL https://github.com/TIBCOSoftware/dovetail-contrib/releases/download/v0.1.3/dovetail_corda_v0.1.3.jar
mvn org.apache.maven.plugins:maven-install-plugin:2.5.2:install-file -DgeneratePom=true -DgroupId=com.tibco.dovetail -DartifactId=dovetail-corda -Dversion=0.1.3 -Dfile=dovetail_corda_v0.1.3.jar -Dpackaging=jar
</code></pre>
<a class="header" href="#labs" id="labs"><h2>Labs</h2></a>
<p>These labs provide you with guides, tutorials and code samples and will help you work through building and deploying Dovetail smart contracts.</p>
<a class="header" href="#iou-smart-contract-tutorial" id="iou-smart-contract-tutorial"><h2>IOU Smart Contract Tutorial</h2></a>
<p>In this tutorial, we will walk you through the steps to model, implement and test smart contracts on distributed ledger technology platform of your choice.</p>
<p>If you want to skip the step by step tutorial you can find all the needed artifacts <a href="tutorials/iou/iou_tutorial.zip">here</a> and jump to start testing the smart contract for <a href="ch02-07-test-hf.html">Hyperledger Fabric</a> or <a href="ch02-09-test-corda.html">R3 Corda</a>.</p>
<p>The example is a simple &quot;I owe you&quot; use case, the issuer of an IOU is obligated to pay the owner of the IOU amount issued, the ownership of the IOU can be transferred by current owner, and all transactions will be recorded on the ledger.</p>
<p>Before getting started, you should have <a href="ch01-01-installation.html">Project Dovetail™ Studio</a> and <a href="ch01-02-dovetail-cli.html">Project Dovetail™ CLI</a> installed, and your <a href="ch01-03-environment.html">development environment setup</a>.</p>
<p>Follow these steps to create the empty structure of the tutorial:</p>
<blockquote>
<ul>
<li>Create the tutorial initial structure</li>
</ul>
</blockquote>
<ul>
<li>iou_tutorials
<ul>
<li>artifacts</li>
<li>iou</li>
<li>network
<ul>
<li>fabric</li>
<li>corda</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>mkdir -p iou_tutorial/artifacts
mkdir -p iou_tutorial/iou
mkdir -p iou_tutorial/network/fabric
mkdir -p iou_tutorial/network/corda
</code></pre>
<a class="header" href="#1-model-iou-smart-contract" id="1-model-iou-smart-contract"><h2>1. Model IOU Smart Contract</h2></a>
<a class="header" href="#11-introduction-to-smart-contract-modelling" id="11-introduction-to-smart-contract-modelling"><h3>1.1 Introduction to smart contract modelling</h3></a>
<p>In this section we will show step by step instructions to create the iou.bna that we will use in the next section of the tutorial.</p>
<blockquote>
<p>You can skip the instructions and download the iou.bna file <a href="tutorials/iou/iou.bna">here</a>.</p>
</blockquote>
<p>Project Dovetail™ supports <a href="https://hyperledger.github.io/composer/v0.19/reference/cto_language.html">Hyperledger Composer modeling language</a> to model smart contract assets and transactions, please refer to <a href="https://github.com/TIBCOSoftware/dovetail-contrib/tree/master/SmartContract/connector/composer">Composer Connector</a> for for more detail.</p>
<a class="header" href="#12-iou-smart-contract-data-model" id="12-iou-smart-contract-data-model"><h3>1.2 IOU Smart Contract Data Model</h3></a>
<p>We will use Visual Studio Code to create IOU smart contract model.</p>
<blockquote>
<ul>
<li>Go to the folder called &quot;iou&quot; in your iou_tutorial folder created in the <a href="ch02-01-iou-tutorial.html">previous</a> page</li>
</ul>
</blockquote>
<pre><code class="language-bash">mkdir iou
</code></pre>
<blockquote>
<ul>
<li>Copy following package metadata and save it as package.json in your iou folder</li>
</ul>
</blockquote>
<pre><code class="language-json">{
  &quot;engines&quot;: {
    &quot;composer&quot;: &quot;^0.19.0&quot;
  },
  &quot;name&quot;: &quot;iou&quot;,
  &quot;version&quot;: &quot;0.0.1&quot;,
  &quot;description&quot;: &quot;IOU network&quot;
}
</code></pre>
<blockquote>
<ul>
<li>Create a models folder called &quot;models&quot; inside the top level &quot;iou&quot; folder</li>
</ul>
</blockquote>
<pre><code class="language-bash">cd iou
mkdir models
</code></pre>
<blockquote>
<ul>
<li>Copy following resource definitions and save it as iou.cto in your models folder</li>
</ul>
</blockquote>
<pre><code class="language-javascript">namespace com.example.iou

import  com.tibco.dovetail.system.*

asset  IOU identified by linearId extends LinearState {
  --&gt; Party issuer
  --&gt; Party owner
  o Amount amt
}

/*
@InitiatedBy
  - arg0: comma delimited list of authorized participants in the format of $tx.path.to.participant, or * for any participant
  - arg1: optional, comma delimited list of required attributes that must exist in the initiator's certificate in the format of name=value.
*/
@InitiatedBy(&quot;$tx.iou.issuer&quot;)
transaction IssueIOU {
  o IOU iou
}

@InitiatedBy(&quot;$tx.iou.owner&quot;)
transaction TransferIOU {
  --&gt; IOU iou //by reference because the asset is already on the ledger
  --&gt; Party newOwner
}

/* 
@Query : mark transaction as query only
*/
@Query()
transaction getIOU {
  o String linearId
}

  @Query()
transaction getIOUIssuedBy {
  o String issuerPartyId
}
</code></pre>
<blockquote>
<ul>
<li>Copy following resource definitions and save it as dovetail.system.cto in your models folder</li>
</ul>
</blockquote>
<pre><code class="language-javascript">namespace com.tibco.dovetail.system

/*
for Hyperledger Fabric, id is the member's mspId
for Corda, id is the member's cert name
*/
participant Party identified by id {
  o String id
}

/*
All non-fungible asset should inherit from LinearState
*/
@CordaClass(&quot;net.corda.core.contracts.LinearState&quot;)
abstract asset LinearState {
  o String linearId
}

@CordaClass(&quot;net.corda.core.contracts.OwnableState&quot;)
abstract asset OwnableState {
  o String linearId
  --&gt;Party owner
}

@CordaClass(&quot;net.corda.core.contracts.FungibleAsset&quot;)
abstract asset FungibleAsset {
  --&gt;Party owner
  o Amount amt
}

@CordaClass(&quot;net.corda.finance.contracts.asset.Cash.State&quot;)
asset Cash identified by assetId extends FungibleAsset {  
  o String assetId
}

@CordaClass(&quot;net.corda.core.contracts.Amount&lt;Currency&gt;&quot;)
concept Amount {
  o String currency
  o Long quantity default = 0
}

@CordaClass(&quot;net.corda.core.contracts.Amount&lt;Issue&lt;Currency&gt;&gt;&quot;)
concept IssueAmount {
  --&gt;Party issuer
  o String currency
  o Long quantity default = 0
}
</code></pre>
<blockquote>
<ul>
<li>Run zip command from iou directory to package the iou project, it will create a iou.bna file in the tutorial folder</li>
</ul>
</blockquote>
<pre><code class="language-bash">zip -r ../iou.bna *
</code></pre>
<a class="header" href="#2-import-iou-smart-contract-data-model" id="2-import-iou-smart-contract-data-model"><h2>2. Import IOU Smart Contract Data Model</h2></a>
<blockquote>
<ul>
<li>Start up Project Dovetail™ Studio, it will display web URL to use</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Go to a browser and open the Web Studio</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Go to Connections Tab &gt; Add Connection &gt; Select Composer Connector</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Give the connection a name, then &quot;Browse&quot; to find the iou.bna file, click &quot;Save Model&quot; button.</li>
</ul>
</blockquote>
<p><video width="480" height="320" controls="controls">
    <source src="videos/importbna.mp4" type="video/mp4">
</video></p><a class="header" href="#3-implement-iou-smart-contract" id="3-implement-iou-smart-contract"><h2>3. Implement IOU Smart Contract</h2></a>
<p>In this step, we will implement the 4 transactions defined in the smart contract model in Project Dovetail™ Studio. A completed iou smart contract is also available to be imported into the Studio, see step <a href="ch02-04-implement.html#35-import-an-existing-application">3.5</a> for details.</p>
<a class="header" href="#31-issueiou-transaction" id="31-issueiou-transaction"><h3>3.1 IssueIOU Transaction*</h3></a>
<blockquote>
<ul>
<li>Go to Apps Tab &gt; Create to create a new Application &quot;IOU&quot;</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Create a flow &gt; flow name &quot;IssueIOU&quot; &gt; Select &quot;SmartContract TXN Trigger&quot; &gt; Select &quot;IOU&quot; from model dropdown &gt; Select &quot;com.example.iou.IssueIOU&quot; from transaction dropdown &gt; Click &quot;Done&quot; button</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>We will add a logger activity, ledger activity and response activity. We will also validate input before writing to ledger.</li>
</ul>
</blockquote>
<p><video width="480" height="320" controls="controls">
    <source src="videos/issueiou.mp4" type="video/mp4">
</video></p>
<a class="header" href="#32-transferiou-transaction" id="32-transferiou-transaction"><h3>3.2 TransferIOU Transaction*</h3></a>
<blockquote>
<ul>
<li>Create a new flow to implement TransferIOU transaction</li>
</ul>
</blockquote>
<p><video width="480" height="320" controls="controls">
    <source src="videos/transferiou.mp4" type="video/mp4">
</video></p>
<a class="header" href="#33-getiou-transaction" id="33-getiou-transaction"><h3>3.3 getIOU Transaction*</h3></a>
<blockquote>
<ul>
<li>Create a new flow to implement getIOU transaction</li>
</ul>
</blockquote>
<p><video width="480" height="320" controls="controls">
    <source src="videos/getiou.mp4" type="video/mp4">
</video></p>
<a class="header" href="#34-getiouissuedby-transaction" id="34-getiouissuedby-transaction"><h3>3.4 getIOUIssuedBy Transaction*</h3></a>
<blockquote>
<ul>
<li>Create a new flow to implement getIOUIssuedBy transaction</li>
<li>We use &quot;Custom Query&quot; activity to query the ledger. This activity is <strong>NOT blockchain agnostic</strong>
<ul>
<li>define a input parameter &quot;issuerId&quot;</li>
<li>define blochchain specific query string, use _$paramName for input substitution, in this example, we use <a href="https://hyperledger-fabric.readthedocs.io/en/release-1.3/couchdb_tutorial.html">Hyperledger Fabric CouchDB query syntax</a></li>
</ul>
</li>
</ul>
</blockquote>
<p>--- During the mapping of transaction response, you will notice tht &quot;array.&quot; is underlined with a red line, it is a UI validation error because Project Dovetail™ Studio UI does not support function yet, the error has no impact to runtime. Function will be supported in the very near future.---</p>
<p><video width="480" height="320" controls="controls">
    <source src="videos/getiouissuedby.mp4" type="video/mp4">
</video></p>
<a class="header" href="#35-import-an-existing-application" id="35-import-an-existing-application"><h3>3.5. Import an existing application</h3></a>
<blockquote>
<ul>
<li>You can also import an application into Project Dovetail™ Studio
<ul>
<li>Go to Project Dovetail™ Studio</li>
<li>If you haven't import iou.bna file from Connections tab, you can do so now following <a href="ch02-03-import.html">this step</a></li>
<li>Create a new Application &quot;IOUImport&quot;, click on &quot;Import&quot; button, use this <a href="tutorials/iou/IOU.json">IOU.json</a></li>
</ul>
</li>
</ul>
</blockquote>
<p><video width="480" height="320" controls="controls">
    <source src="videos/importiou.mp4" type="video/mp4">
</video></p><a class="header" href="#4-export-iou-smart-contract-application" id="4-export-iou-smart-contract-application"><h2>4. Export IOU Smart Contract Application</h2></a>
<blockquote>
<ul>
<li>Go to IOU application</li>
<li>Click on &quot;Export app&quot; button, save the file IOU.json to the artifacts folder inside iou_tutorial</li>
</ul>
</blockquote>
<a class="header" href="#5-generate-hyperledger-fabric-blockchain-artifacts" id="5-generate-hyperledger-fabric-blockchain-artifacts"><h2>5. Generate Hyperledger Fabric Blockchain Artifacts</h2></a>
<p>Run following command from iou_tutorial directory Hyperledger Fabric chaincode is written to artifacts/hlf folder</p>
<p>For testing, transaction security support is not enabled.</p>
<pre><code class="language-bash">cd iou_tutorial
dovetail contract generate -b fabric -m artifacts/IOU.json -v 1.0.0 -t artifacts/hlf
</code></pre>
<a class="header" href="#6-test-iou-smart-contract-on-hyperledger-fabric" id="6-test-iou-smart-contract-on-hyperledger-fabric"><h2>6. Test IOU Smart Contract on Hyperledger Fabric</h2></a>
<p>We need four docker images in order for &quot;dev mode&quot; to run against the supplied
docker compose script.  If you installed the <code>fabric-samples</code> repo clone and
followed the instructions to <a href="https://hyperledger-fabric.readthedocs.io/en/latest/install.html">install binaries</a>, then
you should have the necessary Docker images installed locally.</p>
<blockquote>
<p>If you have downloaded the full tutorial files, jump to step 2</p>
</blockquote>
<a class="header" href="#1-copy-hyperledger-fabric-network" id="1-copy-hyperledger-fabric-network"><h2>1. Copy Hyperledger Fabric Network</h2></a>
<p>Copy sample Hyperledger Fabric Network to your network/fabric directory</p>
<pre><code>cd iou_tutorial/network
</code></pre>
<pre><code>curl -OL https://TIBCOSoftware.github.io/dovetail/tutorials/iou/fabric.zip &amp;&amp; \
unzip fabric.zip &amp;&amp; \
rm fabric.zip
</code></pre>
<a class="header" href="#2-open-a-terminal-and-execute-following-command-to-start-up-the-network" id="2-open-a-terminal-and-execute-following-command-to-start-up-the-network"><h2>2. open a terminal, and execute following command to start up the network</h2></a>
<pre><code>cd fabric
</code></pre>
<pre><code>docker-compose -f docker-compose-simple.yaml up
</code></pre>
<p>open a terminal window, run <code>docker ps</code>, make sure container cli, chaincode, peer, orderer and couchdb are running</p>
<a class="header" href="#3-open-another-terminal-execute-following-commands-to-connect-to-chaincode-container-and-compilestart-chaincode" id="3-open-another-terminal-execute-following-commands-to-connect-to-chaincode-container-and-compilestart-chaincode"><h2>3. open another terminal, execute following commands to connect to chaincode container and compile/start chaincode</h2></a>
<pre><code>docker exec -it chaincode bash
cd iou
go build
CORE_PEER_ADDRESS=peer:7052 CORE_CHAINCODE_ID_NAME=iou:0 ./iou
</code></pre>
<a class="header" href="#4-open-a-third-terminal-execute-following-commands-to-installinstantiate-chaincode-from-cli" id="4-open-a-third-terminal-execute-following-commands-to-installinstantiate-chaincode-from-cli"><h2>4. open a third terminal, execute following commands to install/instantiate chaincode from cli</h2></a>
<pre><code>docker exec -it cli bash
peer chaincode install -p chaincodedev/chaincode/iou -n iou -v 0
peer chaincode instantiate -n iou -v 0 -c '{&quot;Args&quot;:[]}' -C myc
</code></pre>
<a class="header" href="#5-from-the-third-cli-terminalexecute-following-commands-to-invoke-issueiou-and-getiou-transactions" id="5-from-the-third-cli-terminalexecute-following-commands-to-invoke-issueiou-and-getiou-transactions"><h2>5. from the third (cli) terminal,execute following commands to invoke IssueIOU and getIOU transactions</h2></a>
<pre><code>peer chaincode invoke -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.IssueIOU&quot;,&quot;{\&quot;issuer\&quot;:\&quot;charlie\&quot;,\&quot;owner\&quot;:\&quot;alice\&quot;,\&quot;amt\&quot;:{\&quot;quantity\&quot;:10000,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;linearId\&quot;:\&quot;testiou\&quot;}&quot;]}' -C myc

peer chaincode query -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.getIOU&quot;,&quot;testiou&quot;]}' -C myc
</code></pre>
<p>You should see the IOU returned.</p>
<a class="header" href="#6-from-the-cli-terminalexecute-following-commands-to-invoke-transferiou-and-getiou-transactions" id="6-from-the-cli-terminalexecute-following-commands-to-invoke-transferiou-and-getiou-transactions"><h2>6. from the cli terminal,execute following commands to invoke TransferIOU and getIOU transactions</h2></a>
<pre><code>peer chaincode invoke -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.TransferIOU&quot;,&quot;{\&quot;linearId\&quot;:\&quot;testiou\&quot;}&quot;, &quot;bob&quot;]}' -C myc

peer chaincode query -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.getIOU&quot;,&quot;testiou&quot;]}' -C myc
</code></pre>
<p>You should see the IOU now with new owner &quot;bob&quot; returned</p>
<a class="header" href="#7-query-iou" id="7-query-iou"><h2>7. query iou</h2></a>
<p>let's add another IOU issued by charlie</p>
<pre><code>peer chaincode invoke -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.IssueIOU&quot;,&quot;{\&quot;issuer\&quot;:\&quot;charlie\&quot;,\&quot;owner\&quot;:\&quot;john\&quot;,\&quot;amt\&quot;:{\&quot;quantity\&quot;:20000,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;linearId\&quot;:\&quot;testioujohn\&quot;}&quot;]}' -C myc

peer chaincode query -n iou -c '{&quot;Args&quot;:[&quot;com.example.iou.getIOUIssuedBy&quot;, &quot;charlie&quot;]}' -C myc
</code></pre>
<p>You should see two IOUs returned, both issued by charlie.</p>
<a class="header" href="#8-shutdown-network" id="8-shutdown-network"><h2>8. shutdown network</h2></a>
<pre><code>docker-compose -f docker-compose-simple.yaml down
</code></pre>
<a class="header" href="#5-generate-corda-artifacts" id="5-generate-corda-artifacts"><h2>5. Generate Corda Artifacts</h2></a>
<p>Run following command from iou_tutorial directory, R3 Corda contract is written to artifacts/corda folder, put kotlin-IOU-1.0.0.jar on your classpath to develop your CorDapp. A sample IOUApp has been created and available <a href="tutorials/iou/iou_tutorial.zip">here</a> inside iou_tutorial/network/corda folder</p>
<pre><code>cd iou_tutorial
dovetail contract generate -b corda -m artifacts/IOU.json -v 1.0.0 -t artifacts/corda --namespace com.example.iou
</code></pre>
<a class="header" href="#6-test-iou-smart-contract-on-corda" id="6-test-iou-smart-contract-on-corda"><h2>6. Test IOU Smart Contract on Corda</h2></a>
<p>We will use <a href="https://docs.corda.net/demobench.html">Corda Demo Bench</a>, install it if you don't have it installed already.</p>
<blockquote>
<p>If you have downloaded the full tutorial files, jump to step 2</p>
</blockquote>
<a class="header" href="#1-copy-sample-cordapp" id="1-copy-sample-cordapp"><h2>1. Copy Sample CorDapp</h2></a>
<p>Copy sample R3 CorDapp Network to your network/corda directory</p>
<pre><code>cd iou_tutorial/network
</code></pre>
<pre><code>curl -OL https://TIBCOSoftware.github.io/dovetail/tutorials/iou/corda.zip &amp;&amp; \
unzip corda.zip &amp;&amp; \
rm corda.zip
</code></pre>
<a class="header" href="#2-start-up-corda-demo-bench" id="2-start-up-corda-demo-bench"><h2>2. Start up Corda Demo Bench</h2></a>
<ul>
<li>Click on &quot;+Add CorDapp&quot; button then browse to corda directory, select a jar to add(you can only add one jar at a time). Repeat, until all jars are added. You can replace kotlin-IOU-1.0.0.jar with your own.</li>
<li>Start up 3 nodes: Notary, charlie, alice, and bob</li>
<li>Make sure they are all running before continuing.</li>
<li>You can watch the video for step by step instructions.</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="videos/corddemo.gif"><img src="videos/corddemo.gif" alt="Corda Demo Bench" style="max-width:75%;"></a></p>
<a class="header" href="#2-issue-an-iou" id="2-issue-an-iou"><h2>2. Issue an IOU</h2></a>
<p>At charlie's terminal, issue an IOU</p>
<pre><code>flow start com.example.iou.IOUIssueInitiatorFlow iouValue: $100, owner: &quot;O=alice,L=New York,C=US&quot;, externalId: charlie100
</code></pre>
<p>Now run following command from charlie, alice and bob's terminals, you should see the IOU is now on both charlie and alice's ledgers, but not on bob's</p>
<pre><code>run vaultQuery contractStateType: com.example.iou.IOU
</code></pre>
<a class="header" href="#3-transfer-the-iou" id="3-transfer-the-iou"><h2>3. Transfer the IOU</h2></a>
<p>At alice's terminal, transfer IOU to bob</p>
<pre><code>flow start com.example.iou.IOUTransferInitiatorFlow iouId: charlie100, newOwner: &quot;C=FR,L=Paris,O=bob&quot;
</code></pre>
<p>Now run following command from charlie, alice and bob's terminals, you should see the IOU is now on both charlie and bob's ledgers, but no longer on charlie's</p>
<pre><code>run vaultQuery contractStateType: com.example.iou.IOU
</code></pre>
<a class="header" href="#contributing-to-project-dovetail" id="contributing-to-project-dovetail"><h1>Contributing to Project Dovetail</h1></a>
<p>Are you interested in contributing to Project Dovetail? If so, this doc was created specifically for you! If you’re not ready to start contributing code, no problem, feel free to check out the <a href="https://github.com/TIBCOSoftware/Dovetail/labels/kind%2Fdocs">documentation issues</a> and begin by helping enhance the documentation!</p>
<p>If you’re ready and interested to make code contributions, please contact tibcolabs@tibco.com.</p>
<a class="header" href="#dovetail-source-code-projects" id="dovetail-source-code-projects"><h1>Dovetail Source Code Projects</h1></a>
<p>Project Dovetail™ consists of the following sub-projects available as separate repos:</p>
<ul>
<li><a href="https://github.com/TIBCOSoftware/dovetail">dovetail</a>:  Documentation repository and release for dovetail studio UI</li>
<li><a href="https://github.com/TIBCOSoftware/dovetail-cli">dovetail-cli</a>:  Command line tools for building Dovetail apps &amp; extensions</li>
<li><a href="https://github.com/TIBCOSoftware/dovetail-contrib">dovetail-contrib</a>: Dovetail contributions/extensions</li>
<li><a href="https://github.com/TIBCOSoftware/dovetail-java-lib">dovetail-java-lib</a>: Dovetail java runtime for smart contract flows</li>
</ul>
<a class="header" href="#dovetail-community" id="dovetail-community"><h1>Dovetail Community</h1></a>
<p>You can contact us using one of the following channels:</p>
<p>Email: <a href="mailto:tibcolabs@tibco.com">tibcolabs@tibco.com</a></p>
<p>Tibcommunity: <a href="https://community.tibco.com/modules/project-dovetail">Web Page</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
